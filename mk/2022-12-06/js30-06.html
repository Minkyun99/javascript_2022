<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강사님 풀이</title>
    <script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic&family=Noto+Sans+KR:wght@400;500;700;900&family=Poor+Story&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic&family=Noto+Sans+KR:wght@400;500;700;900&family=Poor+Story&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic&family=Noto+Sans+KR:wght@400;500;700;900&family=Poor+Story&display=swap');

        body {font-family: 'Dongle', sans-serif;}
        input{font-family: 'Poor Story', cursive;}
        h1, h2, button {font-family: 'Jua', sans-serif;}
        



        :root {
            --bkcolor0 : rgb(255, 236, 236);
            --bkcolor1 : rgb(255, 226, 226);
            --bkcolor2 : rgb(255, 182, 182);
            --bkcolor3 : rgb(255, 145, 145);
            --bkcolor4 : rgb(246, 203, 255);
            --bkcolor5 : rgb(232, 173, 255);
            --bkcolor6 : rgb(231, 136, 255);
            --bkcolor7 : rgb(156, 0, 196);
        }

        .main{
            height: auto;
        }

        .container {
            padding: 30px;
            border-radius: 20px;
            background-color: var(--bkcolor0);
            height: auto;
            width: 100%;
            max-width: 30rem;
        }

        body {
            display: flex;
            justify-content: center;
        }

        h1 {
            text-align : center;
            margin: 0 0 10px 0;
        }

        .input-set {
            height: 40px;
            margin-bottom: 10px;
        }

        #new-input {
            font-size: 1rem;
            font-weight: bold;
            margin: 0px;
            padding: 5px;
            width:  75%;
            height: 100%;
            border-radius: 30px 0 0 30px;
            box-sizing: border-box;
            border: 1px solid rgba(0,0,0,0.5);
            display: inline;
        }
        
        #new-add {
            border-radius: 0 30px 30px 0;
            font-size: 1rem;
            width: 25%;
            height: 100%;
            margin-left: -15px;
            padding: 5px;
            display: inline;
            box-sizing: border-box;
            border: 1px solid rgba(0,0,0,0.5);
            background-color: var(--bkcolor3);
            color: var(--bkcolor7);
            font-weight: bold;
            cursor: pointer;
        }

        #new-add:hover{
            color: white;
        }

        button {
            width: 80px;
            height: 40px;
            margin: 3px;
            border: 1px solid rgba(0,0,0,0.5);
            background-color: var(--bkcolor1);
            border-radius: 15px;
            color: var(--bkcolor7);
            font-size: 1rem;
            cursor: pointer;
            float: right;
        }

        button:hover {
            background-color: var(--bkcolor7);
            color: white;
            transform: scale(1.1);
            transition: 0.1s linear;
        }

        hr {
            line-height: 50px;
        }

        .list-card {
            transition: 0.5s ease;
            border-radius: 15px;
            background-color: var(--bkcolor5);
            color: white;
            max-width: 85%;
            height: 100%;
            padding: 10px;
            margin: 0 0 10px 0;
            align-items: center;
            overflow: hidden;
        }

        .list-card:hover {
            transition: 0.5s ease;
            border-radius: 15px;
            background-color: var(--bkcolor5);
            color: white;
            max-width: 100%;
            height: 100%;
            padding: 10px;
            margin: 0 0 10px 0;
        }

        h2 {
            margin: 0;
            /* overflow: hidden; */
            /* white-space: normal; */ /*영어일 경우 글자가 깨지는 경우가 있음. 그럴 때 사용.*/
            word-wrap: break-word;
        }

        input {
            display: block;
        }

        .showB {
            float: right;

        }

        .no-showB{
            display: none;
        }

    </style>

    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const type = document.querySelector('h1')

            new TypeIt(type,{speed:50}).pause(700).move(-6).type('나의').go()
            
            const newInput = document.getElementById('new-input') 
            const newAdd = document.getElementById('new-add') 
            const selDel = document.getElementById('new-del') 
            const allDel = document.getElementById('all-del') 
            const list = document.getElementById('list') 
            newInput.setAttribute('placeholder', '내용을 입력하세요.')

            let inputData
            let ck = false

            function listLoadall(){
                edata = localLoad()
                edata.forEach(v=>{
                    listLoaded(v.id, Data.v, v.check)
                })
            }



            newInput.addEventListener('keyup', (e)=>{
                inputData = e.currentTarget.value
                if(e.keycode == 13){add()}  //추가버튼역할
            })
            
            let id = 0
            let arr = [];
            newAdd.addEventListener('click',add )
            
            function add(){(e)=>{
                const h1 = document.querySelector('h1')
                if(inputDat??0){
                    listLoaded()
                    arr.push({id:id, data:inputData, check:ck})
                    inputData = '';
                    newInput.textContent = '';
                    localStorage.setItem('id',id)
                    h1t.textContent = '나의 할 일 목록'
                    newInput.value = null;


                    id++
                }
            }

           

            function listLoaded(id, inputData,ck){
            const listCard = document.createElement('div')
            const span = document.createElement('span')
            const chk = document.createElement('input')
            const h2 = document.createElement('h2')
            const listB = document.createElement('button')

            list.appendChild(listCard).append(span, chk,listB, h2)

            
            Object.assign(listCard,{
                id:`li${id}`,
                className : ck? "list-card-checked":'list-card'})

            Object.assign(chk,{
                id:`i${id}`,
                type : 'checkbox',
                // check : ????  ?'checked':''
            })

            object.assign(span, {
                id:`c${id}`,
                textContent: ck?'완료':'체크'
            })

            Object.assign(listB,{
                className: ck?'showB':'no-showB',
            })
        
        content.textContent = inputData

        function search(ckid){
            fck = edata.findIndex(v=>v.id==ckid)
        }

        const isChecked =e=>e?'list-card-checked':'list-card'
        chk.addEventListener('click', (e)=>{
            ck = e.currentTarget.checked? true : false
            listCard.setAttribute('class', ischecked(ck))
            span.textContent = ck? '완료':'체크'

            search(e.currentTarget.id.slice(1))

            edata[fck].check = e.currentTarget.checked?true:false
            localSave(edata)
        })

    }


        }})
    </script>
</head>
<body>
    <!-- div.container>div.main>h1+div>input#new-input+input#new-add^button#sel-del+button#all-del+div#list -->
    <div class="container">
        <div class="main">
            <h1>할 일 목록</h1>
            <div class="input-set">
                <input type="text" id="new-input">
                <input type="button" id="new-add" value="할 일 추가"></div>
            <button id="sel-del">완료 제거</button>
            <button id="all-del">모두 제거</button>
            <br><br><br>
            <hr>
            <br>
            <div id="list"></div>
        </div>
      
    </div>
    
</body>
</html>